# DocLink - 智能预约管理系统

DocLink 是一个现代化的、基于 Web 的医疗预约和排班管理系统。它旨在为诊所和医疗机构提供一个高效、易用的平台，连接病人、医生和管理员，优化预约流程和资源管理。

## 核心功能

- **多角色认证系统**: 支持病人、医生、管理员三种不同角色的安全登录。
- **在线预约**: 病人可以方便地浏览医生排班、选择时间并在线预约。
- **医生仪表板**: 医生可以管理自己的诊室、创建和调整未来的排班、查看和取消病人的预约，并能为病人代理预约。
- **管理员后台**: 管理员拥有最高权限，可以集中管理医生账户（增删改、重置密码）和系统其他核心资源。
- **密码管理**: 所有用户都可以安全地修改自己的登录密码。

---

## 角色与职责

系统围绕三个核心角色构建，每个角色都有明确的职责和权限。

### 1. 病人 (Patient)

病人是系统的主要使用者，专注于发现和预约服务。

- **账户**: 可通过公共页面自行注册账户，账户角色默认为“病人”。
- **预约**: 登录后，可以浏览所有医生的公开排班信息，并为自己创建预约。
- **管理**: 可以查看自己的预约历史，并取消未来的预约。
- **安全**: 可以修改自己的登录密码。

### 2. 医生 (Doctor)

医生是服务的提供者，专注于管理自己的工作安排和与病人的互动。

- **账户**: 医生的账户由**管理员**在后台创建，并设定初始密码。
- **诊室管理**: 登录后，可以在个人仪表板上**添加、修改或删除**自己名下的诊室，并设定每个诊室的床位数。
- **排班管理**: 能够为未来任意一天、在自己的任意一个诊室中，创建详细的排班。可以灵活指定每个时间点（如 09:00, 10:00）可预约的**具体床位数**。只有医生发布了排班，病人才有号源可约。
- **预约管理**:
  - **查看与取消**: 可以查看所有预约了自己诊室的病人列表，并有权**取消**任何一个预约。
  - **代理预约**: 可以为任何一个已注册的病人**代理预约**自己未来3天内或更远日期的床位。
- **安全**: 可以修改自己的登录密码。

### 3. 管理员 (Admin)

管理员是系统的维护者，拥有全局管理权限。

- **账户**: 系统包含一个默认的管理员账户 (`admin@doclink.com` / `admin123`)，通过数据库填充（seed）创建。
- **医生管理**: 
  - **增删改**: 可以在管理后台**创建、编辑和删除**医生信息。
  - **密码控制**: 创建医生时可**指定初始密码**，也可以随时**重置**任何一位医生用户的密码。
- **安全**: 可以修改自己的登录密码。

---

## 技术栈

- **框架**: [Next.js](https://nextjs.org/) (React)
- **后端 API**: Next.js API Routes
- **数据库**: PostgreSQL
- **ORM**: [Prisma](https://www.prisma.io/)
- **认证**: [Auth.js (NextAuth.js)](https://next-auth.js.org/)
- **UI**: [Tailwind CSS](https://tailwindcss.com/)
- **密码哈希**: [bcrypt](https://github.com/kelektiv/node.bcrypt.js)

## 如何开始

1.  **克隆仓库**:
    ```bash
    git clone <repository-url>
    cd doclink
    ```

2.  **安装依赖**:
    ```bash
    npm install
    ```

3.  **设置环境变量**:
    - 复制 `.env.example` 为 `.env`。
    - 在 `.env` 文件中填入您的数据库连接字符串 (`DATABASE_URL`)。

4.  **数据库迁移与填充**:
    - 首次运行时，应用迁移并填充管理员账户。
    ```bash
    npx prisma migrate dev
    npx prisma db seed
    ```

5.  **启动开发服务器**:
    ```bash
    npm run dev
    ```

现在，应用将在 `http://localhost:3000` 上运行。
